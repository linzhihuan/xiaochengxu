page {
  background-color: #f5f5f7;
  height: 100%;
}

.container {
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* 导航 */
.nav-bar {
  background: #f5f5f7;
  padding-bottom: 20rpx;
  display: flex; align-items: center; justify-content: space-between;
  padding-left: 30rpx; padding-right: 30rpx;
  z-index: 100;
}
.back-icon { font-size: 40rpx; padding: 10rpx; width: 60rpx; }
.nav-title { font-weight: 600; font-size: 32rpx; color: #1d1d1f; }
.nav-spacer { width: 60rpx; }

/* 滚动区 */
.main-scroll {
  flex: 1;
  width: 100%;
}

/* 预览舞台 */
.preview-stage {
  height: 640rpx;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  position: relative;
}

.canvas-box {
  width: 440rpx; height: 440rpx;
  position: relative;
  background: #fff; /* 默认底色 */
  box-shadow: 0 30rpx 60rpx rgba(0,0,0,0.1);
  /* 适配不同长宽比的容器，这里简单用正方形，实际可根据 template 调整 */
  transition: all 0.3s ease;
}

.mask-layer {
  width: 100%; height: 100%;
  position: absolute; top: 0; left: 0; z-index: 20;
  pointer-events: none;
}
.photo-layer {
  width: 90%; height: 90%;
  position: absolute; top: 5%; left: 5%; z-index: 10;
  background-color: #eee;
  object-fit: cover;
}
.empty-guide {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  z-index: 5;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  color: #ccc;
}
.plus { font-size: 60rpx; font-weight: 300; }
.tip { font-size: 24rpx; margin-top: 10rpx; text-transform: uppercase; letter-spacing: 2rpx; }

.preview-caption {
  margin-top: 40rpx;
  font-size: 26rpx; color: #86868b;
  font-weight: 500;
}

/* 配置面板 */
.config-panel {
  background: #fff;
  border-top-left-radius: 40rpx;
  border-top-right-radius: 40rpx;
  padding: 60rpx 40rpx;
  min-height: 500rpx;
  box-shadow: 0 -10rpx 40rpx rgba(0,0,0,0.02);
}

.config-section { margin-bottom: 60rpx; }

.section-title {
  display: flex; justify-content: space-between; align-items: baseline;
  margin-bottom: 30rpx;
}
.section-title text:first-child {
  font-size: 28rpx; font-weight: 600; color: #1d1d1f;
}
.subtitle { font-size: 22rpx; color: #86868b; }

/* 横向滚动选择器 */
.picker-scroll {
  display: flex; height: 160rpx;
  align-items: center;
}
.picker-item {
  width: 140rpx; height: 140rpx;
  margin-right: 24rpx;
  border-radius: 20rpx;
  overflow: hidden;
  position: relative;
  background: #f5f5f7;
  flex-shrink: 0;
}
.picker-item image { width: 100%; height: 100%; }
.picker-item.empty {
  display: flex; align-items: center; justify-content: center;
  color: #999; font-size: 24rpx; border: 1px dashed #ccc;
}
.picker-item.active {
  transform: scale(0.96);
}
.active-border {
  position: absolute; inset: 0;
  border: 6rpx solid #0071e3;
  border-radius: 20rpx;
  display: none;
}
.picker-item.active .active-border { display: block; }

/* 样式卡片 */
.style-card {
  width: 180rpx; height: 160rpx;
  background: #f5f5f7;
  border-radius: 20rpx;
  margin-right: 20rpx;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  flex-shrink: 0;
  border: 2px solid transparent;
  transition: all 0.2s;
  position: relative;
}
.style-card.active {
  background: #fff;
  border-color: #0071e3;
  box-shadow: 0 10rpx 20rpx rgba(0,113,227,0.1);
}
.style-thumb { width: 80rpx; height: 80rpx; margin-bottom: 10rpx; }
.style-name { font-size: 20rpx; color: #333; }
.active-dot {
  position: absolute; top: 10rpx; right: 10rpx;
  width: 12rpx; height: 12rpx; background: #0071e3; border-radius: 50%;
}

/* 规格 Chips */
.chips-container {
  display: flex; flex-wrap: wrap; gap: 20rpx;
}
.chip {
  padding: 18rpx 32rpx;
  background: #f5f5f7;
  border-radius: 40rpx;
  font-size: 26rpx; color: #1d1d1f;
  border: 1px solid transparent;
  transition: all 0.2s;
  display: flex; align-items: center;
}
.chip.active {
  background: #1d1d1f; color: #fff;
  border-color: #1d1d1f;
}
.price-mod {
  font-size: 20rpx; margin-left: 8rpx; opacity: 0.6;
}

/* 底部浮动栏 */
.footer-bar {
  position: absolute; bottom: 0; width: 100%;
  background: rgba(255,255,255,0.9);
  backdrop-filter: blur(20px);
  padding: 20rpx 40rpx;
  padding-bottom: calc(20rpx + env(safe-area-inset-bottom));
  display: flex; justify-content: space-between; align-items: center;
  border-top: 1px solid rgba(0,0,0,0.05);
  z-index: 200;
}

.price-block { display: flex; flex-direction: column; }
.price-block .label { font-size: 20rpx; color: #86868b; text-transform: uppercase; }
.price-block .val { font-size: 40rpx; font-weight: 600; color: #1d1d1f; }

.add-btn {
  background: #0071e3;
  color: #fff;
  padding: 0 60rpx;
  height: 90rpx;
  border-radius: 45rpx;
  font-size: 30rpx; font-weight: 500;
  display: flex; align-items: center; justify-content: center;
  margin: 0;
  box-shadow: 0 10rpx 20rpx rgba(0,113,227,0.3);
}
.add-btn:active { transform: scale(0.98); }


